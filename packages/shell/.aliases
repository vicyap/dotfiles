# Shared shell aliases

# Navigation
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# ls (prefer eza when available)
if command -v eza &>/dev/null; then
  # Wrapper that translates common ls flags that are incompatible with eza:
  #   ls -t (sort by time)   -> eza --sort=modified  (eza's -t needs a value)
  #   ls -S (sort by size)   -> eza --sort=size       (eza's -S means blocksize)
  #   ls -h (human-readable) -> stripped              (eza always uses human-readable)
  unalias ls 2>/dev/null
  function ls {
    local args=()
    local sort_flag=""
    for arg in "$@"; do
      if [[ "$arg" == -* && "$arg" != --* ]]; then
        local cleaned="$arg"
        if [[ "$cleaned" == *t* ]]; then
          cleaned="${cleaned//t/}"
          sort_flag="--sort=modified"
        fi
        if [[ "$cleaned" == *S* ]]; then
          cleaned="${cleaned//S/}"
          sort_flag="--sort=size"
        fi
        cleaned="${cleaned//h/}"
        [[ "$cleaned" != "-" ]] && args+=("$cleaned")
      else
        args+=("$arg")
      fi
    done
    [[ -n "$sort_flag" ]] && args+=("$sort_flag")
    command eza "${args[@]}"
  }
  alias ll='eza -la --git'
  alias la='eza -a'
  alias l='eza -F'
  alias ltree='eza --tree --level=2'
else
  alias ll='ls -alF'
  alias la='ls -A'
  alias l='ls -CF'
fi

# Safety
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Git
alias g='git'
alias ga='git add'
alias gaa='git add --all'
alias gb='git branch'
alias gba='git branch -a'
alias gc='git commit'
alias gcmsg='git commit -m'
alias gco='git checkout'
alias gcb='git checkout -b'
alias gcl='git clone'
alias gcp='git cherry-pick'
alias gd='git diff'
alias gds='git diff --staged'
alias gf='git fetch'
alias gl='git pull'
alias glg='git log --graph --decorate --stat --color'
alias glog='git log --oneline --graph --decorate'
alias gm='git merge'
alias gp='git push'
alias gpom='git pull origin main'
alias ggpush='git push origin $(git branch --show-current)'
alias ggpull='git pull origin $(git branch --show-current)'
alias grb='git rebase'
alias grh='git reset HEAD'
alias gst='git status'
alias gsta='git stash'
alias gstp='git stash pop'

# Claude
alias cc='claude'
alias ccc='claude --model sonnet --effort low /commit-commands:commit'

# Dev
alias nr='npm run'

# Misc
alias c='clear'
alias h='history'
alias grep='grep --color=auto'
alias df='df -h'
alias du='du -h'

# Linux-specific package name aliases
if [[ "$(uname)" != "Darwin" ]]; then
  alias fd='fdfind'
  alias bat='batcat'
fi
